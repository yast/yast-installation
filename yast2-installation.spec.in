@HEADER-COMMENT@


@HEADER@
License: GPL v2 or later
BuildRequires:  docbook-xsl-stylesheets doxygen libxslt perl-XML-Writer sgml-skel update-desktop-files yast2-core-devel yast2-devtools yast2-testsuite

# xmllint
BuildRequires:	libxml2

# to convert control.rnc o control.rng
BuildRequires:	trang

# PackageCallbacks::RegisterEmptyProgressCallbacks()
BuildRequires:	yast2 >= 2.16.52

# Pkg::SourceProvideDigestedFile() 
BuildRequires:	yast2-pkg-bindings >= 2.17.25

# Unified progress bar (done by visnov) 
BuildRequires:	yast2-packager >= 2.17.9

# AutoinstConfig::getProposalList
Requires:       autoyast2-installation >= 2.17.1

# `reboot_same_step, .proc.mounts
Requires:	yast2 >= 2.18.16

# Language::GetLanguageItems and other API
# Language::Set (handles downloading the translation extensions)
Requires:	yast2-country-data >= 2.16.11

# Pkg::SourceProvideDigestedFile() 
Conflicts:	yast2-pkg-bindings < 2.17.25

# Mouse-related scripts moved to yast2-mouse
Conflicts:	yast2-mouse < 2.18.0

# BNC #449818: "description_id" in DefaultDesktop
Requires:	yast2-packager >= 2.17.49

# Storage::GetCommitInfos() call in include/misc.ycp
Requires:	yast2-storage >= 2.18.0

# use in startup scripts
Requires:	initviocons

# Only in inst-sys
# Requires:	yast2-network
# Requires:	yast2-add-on
# Requires:	yast2-update

# Pkg::SourceProvideSignedFile Pkg::SourceProvideDigestedFile
# pkg-bindings are not directly required
Conflicts:	yast2-pkg-bindings < 2.17.25

# InstError
Conflicts:	yast2 < 2.18.6

# Added new function WFM::ClientExists
Conflicts:	yast2-core < 2.17.10

# ButtonBox widget
Conflicts:	yast2-ycp-ui-bindings < 2.17.3

# tar-gzip some system files and untar-ungzip them after the installation (FATE #300421, #120103)
Requires:	tar gzip
Requires:	coreutils

# for the first/second stage of installation
# currently not used
# bugzilla #208307
#Requires:	/usr/bin/jpegtopnm
#Requires:	/usr/bin/pnmtopng

# BNC 446533, /sbin/lspci called but not installed
Requires:	pciutils

Recommends:	yast2-registration
Recommends:	yast2-online-update
Recommends:	yast2-users
Recommends:	yast2-firewall
Recommends:	release-notes
Recommends:	curl
Recommends:	yast2-update
Recommends:	yast2-add-on

PreReq:		%fillup_prereq

BuildArchitectures: noarch

Summary:	YaST2 - Installation Parts

%package devel-doc
Group:          System/YaST
Requires:	yast2-installation >= 2.15.34

PreReq:		%fillup_prereq

Summary:	YaST2 - Installation Parts

%description
System installation code as present on installation media.

%description devel-doc
System installation code as present on installation media.

@PREP@

@BUILD@

@INSTALL@

@CLEAN@

%pre

%post
%{fillup_only -ns security checksig}

%files
%defattr(-,root,root)
%dir /usr/share/YaST2/control
/usr/share/YaST2/control/*.xml
# Fixme: move to another package (to make build of other packages faster)
/usr/share/YaST2/control/*.rng
/usr/share/YaST2/control/*.rnc

@clientdir@/*.ycp
@moduledir@/*.ycp
@moduledir@/*.ybc
@desktopdir@/*.desktop
/usr/share/autoinstall/modules/deploy_image.desktop
/usr/share/YaST2/schema/autoyast/rnc/deploy_image.rnc
%dir /usr/share/autoinstall
%dir /usr/share/autoinstall/modules
%dir @yncludedir@/installation
@yncludedir@/installation/*

# agents
@scrconfdir@/etc_passwd.scr
@scrconfdir@/cfg_windowmanager.scr
@scrconfdir@/cfg_fam.scr
@scrconfdir@/etc_install_inf.scr
@scrconfdir@/etc_install_inf_alias.scr
@scrconfdir@/etc_install_inf_options.scr
@scrconfdir@/proc_modules.scr
@scrconfdir@/run_df.scr
# fillup
@fillupdir@/sysconfig.security-checksig

# programs and scripts
@ystartupdir@/startup

# icewm
/etc/icewm

%dir @docdir@
@docdir@/COPYING
%readme @docdir@/README

%files devel-doc
%defattr(-,root,root)
%doc @docdir@
%exclude @docdir@/COPYING
%exclude @docdir@/README
