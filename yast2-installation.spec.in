@HEADER-COMMENT@


@HEADER@
BuildRequires:  docbook-xsl-stylesheets doxygen libxslt perl-XML-Writer sgml-skel update-desktop-files yast2 yast2-core-devel yast2-devtools yast2-testsuite yast2-country

Requires:	yast2-slp yast2-firewall
Requires:	yast2-update
Requires:	yast2-storage yast2-mouse yast2-bootloader

# YCP modules were moved back to the yast2-packager (see log for yast2-installation-2.13.155)
Requires:	yast2-packager >= 2.13.152
# Pkg::ResolvableCountPatches
Requires:	yast2-pkg-bindings >= 2.13.92
# ProductControl::Run returning `abort (FATE #300422)
Requires:	yast2 >= 2.14.6
# Languages:GetLanguagesMap, bugzilla #204791
Requires:	yast2-country >= 2.13.35

Requires:	yast2-network yast2-users
Requires:	curl release-notes

Requires:       autoyast2-installation yast2-online-update
# unzipping license file
Requires:	unzip
# tar-gzip some system files and untar-ungzip them after the installation (FATE #300421, #120103)
Requires:	tar gzip

# for the first/second stage of installation
# currently not used
# bugzilla #208307
#Requires:	/usr/bin/jpegtopnm
#Requires:	/usr/bin/pnmtopng

Recommends:	yast2-registration

PreReq:		%fillup_prereq

Provides:	yast
Obsoletes:	yast

Provides:	yast2-trans-inst-proposal y2t_inst
Obsoletes:	yast2-trans-inst-proposal y2t_inst
Provides:	yast2-trans-inst-general y2t_inst-general
Obsoletes:	yast2-trans-inst-general y2t_inst-general
Provides:	yast2-instsys
Obsoletes:	yast2-instsys

BuildArchitectures: noarch

Summary:	Installation workflow

%description
This controls the system installation.

@PREP@

@BUILD@

@INSTALL@

@CLEAN@

%pre

%post
%{fillup_only -ns security checksig}

%files
%defattr(-,root,root)
%doc @docdir@
%dir /usr/share/YaST2/control
/usr/share/YaST2/control/*.xml
/usr/share/YaST2/control/*.dtd

@clientdir@/*.ycp
@moduledir@/*.ycp
@moduledir@/*.ybc
@desktopdir@/*.desktop
@schemadir@/autoyast/rnc/add-on.rnc
%dir @yncludedir@/installation
@yncludedir@/installation/*

# agents
@scrconfdir@/etc_passwd.scr
@scrconfdir@/proc_mounts.scr
@scrconfdir@/cfg_windowmanager.scr
@scrconfdir@/cfg_fam.scr
@scrconfdir@/etc_install_inf.scr
@scrconfdir@/etc_install_inf_alias.scr
@scrconfdir@/etc_install_inf_options.scr
@scrconfdir@/run_get_suseconfig_modules.scr
@scrconfdir@/proc_modules.scr
@scrconfdir@/run_df.scr
# fillup
@fillupdir@/sysconfig.security-checksig

# programs and scripts
@ystartupdir@/startup

# fvwmrc
%if 0%{?suse_version} <= 1010
%{prefix}/X11R6/share/fvwm/
%else
%{prefix}/share/fvwm/
%endif
