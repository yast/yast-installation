@HEADER-COMMENT@


@HEADER@
BuildRequires:  docbook-xsl-stylesheets doxygen libxslt perl-XML-Writer sgml-skel update-desktop-files yast2-core-devel yast2-devtools yast2-testsuite yast2-country
BuildRequires:	yast2 >= 2.15.22

Requires:       autoyast2-installation
# WorkflowManager module
Requires:	yast2 >= 2.15.22
# Required in in the first stage, after
# switching to the installed system, bugzilla #249679
Requires:	yast2-bootloader
# Language::selection_skipped, bugzilla #223258
Requires:	yast2-country >= 2.15.0
Requires:	yast2-network
# PackagesUI::ConfirmLicenses, bugzilla #256627
Requires:	yast2-packager >= 2.15.24

# Only in inst-sys
# Requires:	yast2-add-on
# Requires:	yast2-mouse
# Requires:	yast2-storage
# Requires:	yast2-update

# extra sources in ResolvableProperties()
# "", `language", "" in ResolvableProperties()
# pkg-bindings are not directly required
Conflicts:	yast2-pkg-bindings < 2.13.101

# 'Product' and 'Installation' moved to 'yast2'
Conflicts:	yast2 < 2.15.18

# tar-gzip some system files and untar-ungzip them after the installation (FATE #300421, #120103)
Requires:	tar gzip

# for the first/second stage of installation
# currently not used
# bugzilla #208307
#Requires:	/usr/bin/jpegtopnm
#Requires:	/usr/bin/pnmtopng

Recommends:	yast2-registration
Recommends:	yast2-online-update
Recommends:	yast2-users
Recommends:	yast2-firewall
Recommends:	release-notes
Recommends:	curl
Recommends:	yast2-update
Recommends:	yast2-add-on

PreReq:		%fillup_prereq

Provides:	yast
Obsoletes:	yast

Provides:	yast2-trans-inst-proposal y2t_inst
Obsoletes:	yast2-trans-inst-proposal y2t_inst
Provides:	yast2-trans-inst-general y2t_inst-general
Obsoletes:	yast2-trans-inst-general y2t_inst-general
Provides:	yast2-instsys
Obsoletes:	yast2-instsys

BuildArchitectures: noarch

Summary:	Installation workflow

%description
This controls the system installation.

@PREP@

@BUILD@

@INSTALL@

@CLEAN@

%pre

%post
%{fillup_only -ns security checksig}

%files
%defattr(-,root,root)
%doc @docdir@
%dir /usr/share/YaST2/control
/usr/share/YaST2/control/*.xml
/usr/share/YaST2/control/*.dtd

@clientdir@/*.ycp
@moduledir@/*.ycp
@moduledir@/*.ybc
@desktopdir@/*.desktop
%dir @yncludedir@/installation
@yncludedir@/installation/*

# agents
@scrconfdir@/etc_passwd.scr
@scrconfdir@/proc_mounts.scr
@scrconfdir@/cfg_windowmanager.scr
@scrconfdir@/cfg_fam.scr
@scrconfdir@/etc_install_inf.scr
@scrconfdir@/etc_install_inf_alias.scr
@scrconfdir@/etc_install_inf_options.scr
@scrconfdir@/run_get_suseconfig_modules.scr
@scrconfdir@/proc_modules.scr
@scrconfdir@/run_df.scr
# fillup
@fillupdir@/sysconfig.security-checksig

# programs and scripts
@ystartupdir@/startup

# fvwmrc
%if 0%{?suse_version} <= 1010
%{prefix}/X11R6/share/fvwm/
%else
%{prefix}/share/fvwm/
%endif
